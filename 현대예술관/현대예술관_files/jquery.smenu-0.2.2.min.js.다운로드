/*
 sMenu - v0.2.2 - 2017-03-07
 http://github.com/milgam12/smenu
 Copyright (c) 2015 Ma Yong Min
 Licensed MIT (http://github.com/milgam12/smenu/LICENSE-MIT)
*/
(function(d){d.sMenu={version:"0.2.2",curr:0};d.fn.sMenu=function(l){var a=d.extend(!0,{},d.fn.sMenu.defaults,l);this.each(function(){for(var f=d(this),m=d("ul",f),r=d("> li",m),g=d("> a",r),n=3,h=null,p={off:[],on:[],hover:[]},m="> ul > li",q=1;q<=n;q++){var l=d(m,f);if(0<l.length)l.addClass(a.depth_class+"-"+q),m+="> ul > li";else{n=q-1;break}}var t=function(b){for(var c=0,e=1;e<=n;e++)if(b.hasClass(a.depth_class+"-"+e)){c=e;break}return c},v=function(){for(var b="",c=1;c<=n;c++){var e=0;"1"==c?
e=a.on_menu1:"2"==c?e=a.on_menu2:"3"==c&&(e=a.on_menu3);--e;if(-1<e)b+="> ul > li:eq("+e+")",d(b,f).addClass(a.on_class);else break}if(a.flag_use_img)for(b=g.length,c=0;c<b;c++)g.eq(c).parent("li").hasClass(a.on_class)?k(g.eq(c).find("> img"),"on"):k(g.eq(c).find("> img"),"off");a.onCall()},k=function(a,c){var b;b=a.attr("class").split("img_arr_");b=b[1].split(" ");var d=b[0];b=a.attr("src");d=p[c][d];b!=d&&a.attr("src",d)},u=function(b){var c=t(b);if(0<c){var e=b.siblings("li").find("li").addBack();
e.removeClass(a.hover_class);b.addClass(a.hover_class);if(a.flag_use_img){for(var d=e.length,f=0;f<d;f++)e.eq(f).hasClass(a.on_class)?k(e.eq(f).find("> a > img"),"on"):k(e.eq(f).find("> a > img"),"off");k(b.find("> a > img"),"hover")}}a.hoverCall(b,c)},w=function(){f.removeClass(a.open_class);a.closeCall();r.removeClass(a.hover_class);v();clearTimeout(h)};a.flag_use_img&&function(){for(var b=g.length,c=0;c<b;c++){var e=g.eq(c).find("> img").addClass("img_arr_"+c).attr("src"),d=e.lastIndexOf(".");
p.off[c]=e;var f=e.substring(0,d),e=e.substring(d,e.length);p.on[c]=f+a.on_suffix+e;p.hover[c]=f+a.hover_suffix+e}}();g.on("click",function(b){var c=!1;if(a.is_snb||a.is_responsive&&1*d(document).width()<=1*a.mobile_width)c=!0;c&&(c=d(this).parent("li"),c.hasClass(a.hover_class)?(c.removeClass(a.hover_class),2>t(c)&&(f.removeClass(a.open_class),a.closeCall(),clearTimeout(h))):(u(c),f.hasClass(a.open_class)||(f.addClass(a.open_class),a.openCall()),clearTimeout(h)),0<c.find("ul").length&&b.preventDefault())}).on("mouseenter focusin",
function(b){b=!0;if(a.is_snb||a.is_responsive&&1*d(document).width()<=1*a.mobile_width)b=!1;b&&(f.hasClass(a.open_class)||(f.addClass(a.open_class),a.openCall()),b=d(this).parent("li"),u(b),1<t(b)&&!b.parent("ul").parent("li").hasClass(a.hover_class)&&u(b.parent("ul").parent("li")),clearTimeout(h))});f.on("mouseleave",function(b){b=!0;if(a.is_snb||a.is_responsive&&1*d(document).width()<=1*a.mobile_width)b=!1;b&&w()});g.filter(":eq(0), :eq(-1)").on("focusout",function(b){b=!0;if(a.is_snb||a.is_responsive&&
1*d(document).width()<=1*a.mobile_width)b=!1;b&&(h=setTimeout(function(){w()},100))});r.removeClass(a.hover_class);v()});return this};d.fn.sMenu.defaults={open_class:"open",on_class:"on",hover_class:"on",depth_class:"depth",flag_use_img:!1,on_suffix:"_on",hover_suffix:"_on",hoverCall:function(d,a){},onCall:function(){},openCall:function(){},closeCall:function(){},on_menu1:0,on_menu2:0,on_menu3:0,is_snb:!1,is_responsive:!1,mobile_width:768}})(jQuery);